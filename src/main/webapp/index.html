<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>SalStocks</title>
	<link rel="stylesheet" type="text/css" href="search.css"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
	
	
		function search(){
		 	$.ajax({
		 		url: "Search",
		 		data:{
		 			query: document.searchForm.searchField.value
		 		},
		 		success: function(result){
		 			if(result.hasOwnProperty('error')){
			 			$(errorDiv).html("<h2>"+result.errorMessage+"<\h2>");
		 			}else{//Display the stock data
		 				console.log(result)
		 				$(homeDiv).html("\
		 						<div class=\"info\">\
		 						<p class=\"ticker\">"+result.ticker+"</p>\
		 						<br>\
		 						<p class=\"name\">"+result.name+"</p>\
		 						<br>\
		 						<p class=\"exchangeCode\">"+result.exchangeCode+"</p>\
		 						<br>\
		 						<br>\
		 						<p class=\"summary\">Summary</p>\
		 						<br>\
		 						<hr class = \"lineDivide\">\
		 						<br>\
		 						<br>\
		 						<p class=\"high\">High Price: "+result.high+"</p>\
		 						<p class=\"low\">Low Price: "+result.low+"</p>\
		 						<p class=\"open\">Open Price: "+result.open+"</p>\
		 						<p class=\"close\">Close: "+result.close+"</p>\
		 						<p class=\"volume\">Volume: "+result.volume+"</p>\
		 						<br>\
		 						<br>\
		 						<p class=\"descriptionTitle\"><b>Company's Description</b></p>\
		 						<br>\
		 						<p class=\"startDate\">Start Date: "+result.startDate+"</p>\
		 						<br>\
		 						<p class=\"description\">"+result.description+"</p>\
		 						</div>\
		 						");
		 			}
		 		}
		 	});
		}
	 
	 
	 
	</script> 
</head>
<body>

	<div id="homeDiv" class="homeDiv">
		<h1 id="title" class="title">STOCK SEARCH</h1>
		<form name="searchForm" method ="GET" action = "search();" id="search-form">
			<div class="search">
				<input type="text" class="round" id="searchField" name="searchField" placeholder="Enter stock ticker">
				<input type="button" class ="corner" onclick="search()" id="searchButton" name="searchButton">
			</div>
		</form>		
		<div id="errorDiv" class = "error"></div>
	</div>
		
	
	<script> 
        $(window).ready(function() {
        $("#search-form").on("keypress", function (event) {
            var keyPressed = event.keyCode || event.which;
            if (keyPressed === 13) {
                event.preventDefault();
                search();
                return false;
            }
        });
        });
    </script> 



</body>
</html>